<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>App de ImÃ³veis</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<style>
body{font-family:'Segoe UI',sans-serif;background:#f4f6f8;margin:0;padding:0;}
#lista{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px;}
.card{border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.1);overflow:hidden;background:#fff;transition: transform 0.2s, box-shadow 0.2s; display:flex; flex-direction:column;}
.card:hover{transform: translateY(-6px);box-shadow:0 12px 24px rgba(0,0,0,0.2);}
.card img{width:100%;height:180px;object-fit:cover; cursor:pointer;}
.card-body{padding:12px;flex:1;display:flex;flex-direction:column;justify-content:space-between;}
.card h3{margin:0;font-size:16px;color:#1a1a1a;}
.card p{margin:4px 0;color:#555;font-size:13px;}
.card p.preco{font-weight:bold;color:#2d89ef;font-size:15px;}
.btn-detalhes,.modal-content .btn-whatsapp{display:block;margin:10px auto 0 auto;background:#25D366;color:#fff;text-align:center;padding:8px 20px;border-radius:50px;font-weight:bold;text-decoration:none;cursor:pointer;font-size:14px;transition:background 0.2s;}
.modal-content .btn-whatsapp:hover{background:#1da851;}
.modal{display:none;position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;background-color: rgba(0,0,0,0.6);overflow-x:hidden;}
.modal-content{background:#fff;padding:20px;border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;overflow-x:hidden;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-sizing:border-box;}
.modal-content img{width:100%;max-height:300px;object-fit:cover;border-radius:8px;margin-bottom:10px;cursor:pointer;transition: transform 0.3s;}
.modal-content img.zoomed{transform: scale(2);cursor: move;}
.modal-content img:hover:not(.zoomed){transform: scale(1.05);}
.miniaturas{display:flex;justify-content:center;gap:8px;margin-top:10px;flex-wrap:wrap;}
.miniaturas img{width:60px;height:60px;object-fit:cover;border-radius:6px;cursor:pointer;border:2px solid transparent;transition:border 0.2s;max-width:100%;}
.miniaturas img.selected{border-color:#2d89ef;}
.close{color:#aaa;position:absolute;top:10px;right:20px;font-size:28px;font-weight:bold;cursor:pointer;}
.close:hover{color:#000;}
.nav-arrow{position:absolute;top:50%;transform:translateY(-50%);font-size:36px;color:#fff;background:rgba(0,0,0,0.4);padding:6px 12px;border-radius:50%;cursor:pointer;user-select:none;}
.tab{display:inline-block;padding:8px 16px;cursor:pointer;border-radius:6px;background:#eee;margin-right:5px;font-weight:bold;}
.tab.active{background:#2d89ef;color:#fff;}
.ordenacao-select{padding:6px 10px;border-radius:6px;border:1px solid #ccc;font-size:14px;margin-right:10px;}
#destaques-container{display:flex;align-items:center;position:relative;margin:20px 0;overflow:hidden;}
#destaques{display:flex;gap:16px;overflow-x:auto;scroll-behavior:smooth;flex:1;}
#destaques::-webkit-scrollbar{display:none;}
#destaques .destaque-card{min-width:200px;flex:0 0 auto;border-radius:12px;overflow:hidden;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,0.1);cursor:pointer;transition: transform 0.2s, box-shadow 0.2s;}
#destaques .destaque-card:hover{transform: translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,0.2);}
#destaques .destaque-card img{width:100%;height:120px;object-fit:cover;}
#destaques .destaque-card p{padding:8px;margin:0;font-size:14px;font-weight:bold;color:#2d89ef;text-align:center;}
.destaque-left{left:0;position:absolute;z-index:10;}
.destaque-right{right:0;position:absolute;z-index:10;}
@media(max-width:768px){#lista{grid-template-columns:1fr;} .card img{height:150px;} .tab{overflow-x:auto; white-space:nowrap;}}

/* WhatsApp flutuante profissional */
#whatsapp-flutuante {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: url('https://cdn-icons-png.flaticon.com/512/733/733585.png') no-repeat center center;
  background-size: cover;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  cursor: pointer;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  animation: pulse 2.5s infinite;
  transition: transform 0.2s;
}
#whatsapp-flutuante:hover {
  transform: scale(1.1);
  animation: none;
}
#whatsapp-flutuante .tooltip {
  position: absolute;
  right: 100%;
  margin-right: 15px;
  background: #25D366;
  color: #fff;
  padding: 8px 12px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: bold;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transform: translateX(10px);
  transition: opacity 0.3s, transform 0.3s;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
#whatsapp-flutuante .tooltip::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 100%;
  margin-top: -6px;
  border-width: 6px;
  border-style: solid;
  border-color: transparent transparent transparent #25D366;
}
#whatsapp-flutuante:hover .tooltip {
  opacity: 1;
  transform: translateX(0);
}
@media(max-width:480px){
  #whatsapp-flutuante .tooltip {
    right: auto;
    left: 50%;
    bottom: 70px;
    transform: translateX(-50%) translateY(10px);
  }
  #whatsapp-flutuante:hover .tooltip {
    transform: translateX(-50%) translateY(0);
  }
}
@keyframes pulse {
  0% { transform: scale(1); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
  50% { transform: scale(1.1); box-shadow: 0 6px 16px rgba(0,0,0,0.4); }
  100% { transform: scale(1); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
}
</style>
</head>
<body>

<div id="destaques-container">
  <span class="nav-arrow destaque-left">&#10094;</span>
  <div id="destaques"></div>
  <span class="nav-arrow destaque-right">&#10095;</span>
</div>

<div id="imoveis-app">
  <div id="tabs-container"></div>
  <div id="filtros-container"></div>
  <div id="ordenacao-container"></div>
  <div id="lista"></div>
  <div id="detalhesModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div id="modal-body"></div>
    </div>
  </div>
</div>

<!-- BotÃ£o WhatsApp flutuante -->
<a id="whatsapp-flutuante" href="https://api.whatsapp.com/send?phone=5512992468636" target="_blank">
  <span class="tooltip">ðŸ’¬ Fale conosco no WhatsApp</span>
</a>

<script>
// Tooltip automÃ¡tica por 3 segundos
window.addEventListener('DOMContentLoaded', () => {
  const tooltip = document.querySelector('#whatsapp-flutuante .tooltip');
  tooltip.style.opacity = '1';
  tooltip.style.transform = 'translateX(0)';
  setTimeout(() => {
    tooltip.style.opacity = '0';
    tooltip.style.transform = 'translateX(10px)';
  }, 3000);
});

// ==================== Modal ====================
class ModalImovel{
@@ -240,33 +244,36 @@
  header: true,
  skipEmptyLines: true,
  complete: res => {
    const dados = res.data.map(i=>{
    // Remove a primeira linha (cabeÃ§alho) se houver
    const dadosRaw = res.data.slice(1);

    const dados = dadosRaw.map(i=>{
      i.ref = i.ref || "";
      i.pet = (i.pet && ["sim","s","1"].includes(i.pet.trim().toLowerCase())) ? "Sim" : "NÃ£o";
      i.condominio = (i.cond_incluso && ["sim","s","1"].includes(i.cond_incluso.trim().toLowerCase())) ? "Sim" : "NÃ£o";
      i.garagem = i.garagem || "0";
      i.titulo = i.titulo || "";
      i.descricao = i.descricao || "";
      i.tipo = i.tipo || "";
      i.operacao = i.operacao || "";
      i.cidade = i.cidade || "";
      i.preco = i.preco || "0";
      i.area = i.area || "0";
      i.banheiros = i.banheiros || "0";
      i.quartos = i.quartos || "0";
      i.imagens = i.imagens || "";
      return i;
    });

    const modal = new ModalImovel("detalhesModal");
    const lista = new ListaImoveis("lista", modal);

    new FiltroImoveis("filtros-container", dados, lista);
    new TabsImoveis("tabs-container", dados, lista);
    new OrdenacaoImoveis("ordenacao-container", lista);
    new Destaques(dados);
  }
});
</script>
</body>
</html>
